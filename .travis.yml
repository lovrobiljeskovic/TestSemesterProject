language: node_js
cache:
  directories: 
    - $HOME/server/node_modules
    - $HOME/client/node_modules

node_js:
  - 10
script:
  #- cd server && yarn && yarn lint && yarn test:coveralls && yarn cucumber
  - cd server && yarn && yarn start &
  - cd client && yarn && yarn start &
  - cd client && yarn && yarn wdio
  - nc -w 60 localhost 3000 && nc -w 60 localhost 8000
  - kill %1 %2